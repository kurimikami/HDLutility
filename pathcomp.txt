要求仕様書

プロジェクト名：ファイルパス比較ツール

概要

本ツールは、指定された2つのファイルを比較し、それぞれのファイルに含まれるパス（ファイルパス）の一致、不一致、存在確認などを行うPythonスクリプトです。また、指定されたディレクトリ内でファイルパスの実際の存在を確認する機能も提供します。

1. 機能要件

1.1 ファイル比較機能

	•	指定された2つのファイル (file_a と file_b) を読み込み、両ファイル内に記載されたファイルパスを比較する。
	•	パスが一致するか、不一致の場合はそれぞれのファイルのパスを表示。
	•	各パスの行番号と実際の絶対パスを表示。
	•	結果として、一致したパス、不一致のパス、および一方のファイルにしか存在しないパスの数を出力する。

1.2 ファイルパスの存在確認機能

	•	指定されたファイル（file_a）に記載されているファイルパスが、指定されたディレクトリ内に実際に存在するかを確認。
	•	存在しないパスを赤字で表示。
	•	存在する場合は、マッチしたパスの数と存在しなかったパスの数を出力する。

1.3 パスのエクスポート機能

	•	指定されたファイル（file_a）に記載されている全てのパスをエクスポートし、標準出力に表示する。
	•	各パスにはファイル内の行番号とその絶対パスが含まれる。

2. 技術要件

2.1 入力

	•	file_a: 比較・確認するための入力ファイル。ファイルパスが記載されている。
	•	file_b: （オプション）比較対象となる2番目の入力ファイル。ファイルパスが記載されている。

2.2 オプション引数

	•	--export: file_a内のファイルパスを出力するためのオプション。
	•	--expand: ファイルパス内に含まれる環境変数を展開し、絶対パスとして処理するオプション。
	•	--check DIR: file_aに記載されているパスが、指定されたディレクトリ内に存在するか確認するオプション。

2.3 ファイル拡張子のフィルタリング

	•	.vhd、.v、.svh、.sv 拡張子を持つファイルのみを対象にする。

2.4 エラー処理

	•	指定されたファイルが存在しない場合、エラーメッセージを表示する。
	•	読み取り中にファイルが読み取れない場合、その理由を表示する。

3. 出力要件

3.1 比較結果

	•	一致するファイルパスの数、不一致のファイルパスの数、および一方のファイルにしか存在しないファイルパスの数を表示する。
	•	各結果には、対応するファイルの行番号と絶対パスを表示。

3.2 存在確認結果

	•	指定されたディレクトリに存在するファイルパスの数と、存在しないファイルパスの数を表示する。

3.3 エクスポート結果

	•	各パスの行番号と絶対パスを標準出力に表示。

4. 使用例

4.1 ファイル比較の例

python3 script.py file_a.txt file_b.txt

結果として、ファイルパスの比較結果（一致、不一致など）を表示。

4.2 パスのエクスポートの例

python3 script.py file_a.txt --export

結果として、file_a.txt内のすべてのファイルパスが標準出力に表示される。

4.3 存在確認の例

python3 script.py file_a.txt --check /path/to/directory

結果として、file_a.txtに記載されたパスが指定されたディレクトリに存在するかどうかが表示される。

5. 非機能要件

	•	スクリプトは、Python 3.6以上で実行できること。
	•	大規模なディレクトリ構造や多数のファイルパスに対しても効率的に処理が行えること。
	•	エラーメッセージは明確で、ユーザが次のステップを容易に理解できるようにする。

これで要求仕様は以上です。必要な変更や追加があればお知らせください。